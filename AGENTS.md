# AGENTS.md — ЕДИНЫЕ ПРАВИЛА (суммарный текст)
ГОВОРИ СО МНОЙ ВСЕГДА ТОЛЬКО ПО РУССКИ
ДЛЯ ПОЛУЧЕНИЯ ДОКУМЕНТАЦИЙ ОСНОВНЫХ БИБЛИОТЕК, КОТОРЫЕ БОЛЬШЕ ВСЕГО ИСПОЛЬЗУЮТСЯ В ПРОЕКТЕ ОБЯЗАТЕЛЬНО ИСПОЛЬЗУЙ mcp conext7
## Главный принцип
**Всегда выкладываться на максимум:** на каждом запросе выполнять **очень глубокий анализ**, работать **максимально долго и внимательно**, делать **максимально много проверок** и подтверждать выводы **фактами** (логи, вывод команд, диффы). **Никаких поверхностных ответов** — только глубокая работа, повторные проходы и перепроверки. **KISS:** решения простые и прозрачные, без лишнего усложнения.

## Перед стартом
- **Понимание задачи:** кратко и чётко сформулировать цель, контекст, входы/выходы, ограничения и критерий «готово». Отдельно отметить зоны **максимально глубокого анализа**.
- **План (микро-шаги):** разбить на маленькие части с минимальными изменениями за шаг; на каждом шаге — **максимум проверок**.
- **Вопросы и неопределённости:** явно перечислить, где информации не хватает; помечать **гипотезы** и предлагать, **как перепроверить**.

## Микро-шаги
Каждый шаг выполняется маленьким диффом по принципу KISS. Процедура:
1) цель шага; 2) оценка влияния на модули/конфиги/миграции;  
3) проверка окружения; 4) внесение изменений;  
5) **максимум терминальных проверок**; 6) фиксация доказательств;  
7) вывод о регрессиях/рисках и предложение следующего шага.  
На **каждом** шаге — **очень глубокий анализ** и **максимально много проверок**.

## Терминал и окружение (terminal-first)
- Выполнять **много команд в терминале** для проверки кода и диагностики проблем: форматирование, линтеры, типы, сборка/запуск, e2e/смоук, негативные и краевые сценарии, просмотр логов.
- **Виртуальное окружение (venv):** всегда проверять; если нет — **создать** и **установить все зависимости**, затем прогонять **максимум** проверок.
- Структура тестов и инструментов — **по необходимости**, но запуск — из терминала единым entrypoint (скрипт/Make-цель/команда).

## Контейнеры
- Проводить **очень глубокий анализ**: конфигурации, сборка/старт, сети, переменные окружения, health-checks, тома, ресурсы, логи/метрики.  
- Делать **много проверочных команд** и предъявлять **факты** (логи/выводы). Выводы — только после повторных перепроверок.

## Политика правды и прозрачности
**Никогда не врать.** Говорить **только правду**. Любое утверждение — либо факт, либо **гипотеза** с пометкой «нужно перепроверить». Если **нет уверенности** — прямо так и писать и предлагать шаги перепроверки. Ошибку обнаружили — **немедленно признать**, объяснить причину, предложить/выполнить исправление и показать проверку.

## Критерий завершения работы («ГОТОВО»)
Работа считается завершённой **только** когда:
- пройдён **полный набор проверок** (terminal-first) и **доказано**, что добавленный/изменённый функционал работает **безошибочно**;
- выполнен **очень глубокий анализ** результатов (логи/трейсы/артефакты), скрытых ошибок и флапов нет;
- контейнеры проверены **максимально детально** (конфиги, health-checks, логи) и подтверждены фактами;
- подтверждена **общая работоспособность** сквозными сценариями (e2e/смоук);  
- **нет регрессий** в смежных модулях; при рисках добавлены нужные проверки;  
- предоставлены **доказательства**: вывод команд, логи, диффы, краткий протокол.

**Стоп-кран:** если хоть один тест красный, есть сомнения или нет доказательств — **работа не завершена**.

## Чек-лист «Выложиться на максимум»
- [ ] Понимание задачи и план микро-шагов сформулированы; вопросы/неопределённости зафиксированы.  
- [ ] **Очень глубокий анализ** кода/конфигов/схем/логов.  
- [ ] **Много команд** проверок в терминале, единый entrypoint.  
- [ ] **venv**: проверен → при отсутствии **создан** → зависимости **установлены** → проверки **прогнаны по максимуму**.  
- [ ] Контейнеры: анализ **максимально глубоко**, много проверок, логи/метрики сохранены.  
- [ ] Доказательства собраны (логи, выводы, диффы).  
- [ ] Итог: функционал доказательно работает без ошибок, регрессий нет, критерий «ГОТОВО» выполнен.

**Итоговая формула:** всегда **выложиться на максимум**, **анализировать максимально глубоко**, **выполнять максимально много проверок** и подтверждать всё **фактами**, сохраняя решения **простыми** по принципу **KISS**.
